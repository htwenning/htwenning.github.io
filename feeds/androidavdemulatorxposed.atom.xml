<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>wenning's blog - Android,AVD,emulator,Xposed</title><link href="https://htwenning.github.io/" rel="alternate"></link><link href="https://htwenning.github.io/feeds/androidavdemulatorxposed.atom.xml" rel="self"></link><id>https://htwenning.github.io/</id><updated>2018-09-29T00:00:00+08:00</updated><entry><title>Install Xposed on AVD</title><link href="https://htwenning.github.io/install-xposed-on-avd.html" rel="alternate"></link><published>2018-09-29T00:00:00+08:00</published><updated>2018-09-29T00:00:00+08:00</updated><author><name>wenning</name></author><id>tag:htwenning.github.io,2018-09-29:/install-xposed-on-avd.html</id><summary type="html">&lt;h1&gt;Install Xposed on AVD&lt;/h1&gt;
&lt;p&gt;在avd上获取root权限，安装xposed framework&lt;/p&gt;
&lt;h3&gt;模拟器准备工作：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;./sdkmanager "system-images;android-22;google_apis;x86"&lt;/li&gt;
&lt;li&gt;./avdmanager create avd -n test -k "system-images;android-22;google_apis;x86" 安装后发现没有挂载sdcard， 后来在android studio中修改上了&lt;/li&gt;
&lt;li&gt;cp ~/Library/Android/sdk/system-images/android-22/google_apis/x86/system.img ~/.android/avd/test.avd/system-qemu.img 拷贝之后，模拟器对system的修改就会被保存下载&lt;/li&gt;
&lt;li&gt;./emulator -avd test -port 5557 -writable-system …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h1&gt;Install Xposed on AVD&lt;/h1&gt;
&lt;p&gt;在avd上获取root权限，安装xposed framework&lt;/p&gt;
&lt;h3&gt;模拟器准备工作：&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;./sdkmanager "system-images;android-22;google_apis;x86"&lt;/li&gt;
&lt;li&gt;./avdmanager create avd -n test -k "system-images;android-22;google_apis;x86" 安装后发现没有挂载sdcard， 后来在android studio中修改上了&lt;/li&gt;
&lt;li&gt;cp ~/Library/Android/sdk/system-images/android-22/google_apis/x86/system.img ~/.android/avd/test.avd/system-qemu.img 拷贝之后，模拟器对system的修改就会被保存下载&lt;/li&gt;
&lt;li&gt;./emulator -avd test -port 5557 -writable-system  这里需要指明解锁system&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;开始root：&lt;/h3&gt;
&lt;p&gt;参考https://stackoverflow.com/questions/5095234/how-to-get-root-access-on-android-emulator&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;adb install supersu.apk&lt;/li&gt;
&lt;li&gt;unzip flashable.zip&lt;/li&gt;
&lt;li&gt;adb root; adb remount&lt;/li&gt;
&lt;li&gt;cd flashable/your_emu_arch/; adb push su.pie /system/bin/su&lt;/li&gt;
&lt;li&gt;adb shell; su root; chmod 06755 /system/bin/su&lt;/li&gt;
&lt;li&gt;su --install; su --daemon&amp;; setenforce 0&lt;/li&gt;
&lt;li&gt;in emulator, open opensu and update bin, click normal button; reboot&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;安装xposed：&lt;/h3&gt;
&lt;p&gt;下载xpose installer.apk， 在app中操作即可。&lt;/p&gt;
&lt;h3&gt;已知问题：&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://github.com/htwenning/htwenning.github.io/issues/3"&gt;xpose-installer 下载框架的时候闪退&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content></entry></feed>